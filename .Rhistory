data <- inner_join(tests_raw, cases_raw, by="id") %>%
select(-ends_with("y"),"val.y", -"id", -"Measure.x") %>%
rename(Tests = val.x) %>%
rename(Cases = val.y) %>%
filter(!is.na(Cases) && !is.na(Test))
data <- inner_join(tests_raw, cases_raw, by="id") %>%
select(-ends_with("y"),"val.y", -"id", -"Measure.x") %>%
rename(Tests = val.x) %>%
rename(Cases = val.y) %>%
filter(!is.na(Cases) || !is.na(Test))
data <- inner_join(tests_raw, cases_raw, by="id") %>%
select(-ends_with("y"),"val.y", -"id", -"Measure.x") %>%
rename(Tests = val.x) %>%
rename(Cases = val.y) %>%
filter(!is.na(Cases) || !is.na(Test))
data <- inner_join(tests_raw, cases_raw, by="id") %>%
select(-ends_with("y"),"val.y", -"id", -"Measure.x") %>%
rename(Tests = val.x) %>%
rename(Cases = val.y) %>%
filter(!is.na(Cases) || !is.na(Tests))
rm(list = ls())
setwd("~/GitHub/COVID-19-analysis")
library(tidyverse)
library(jsonlite)
#Read in the material
tests_raw <- read.csv("https://sampo.thl.fi/pivot/prod/en/epirapo/covid19case/fact_epirapo_covid19case.csv?row=dateweek2020010120201231-443686&row=hcdmunicipality2020-445222&column=measure-445356",sep=";", encoding = "UTF-8")
cases_raw <- read.csv("https://sampo.thl.fi/pivot/prod/en/epirapo/covid19case/fact_epirapo_covid19case.csv?row=dateweek2020010120201231-443686&row=hcdmunicipality2020-445222&column=measure-444833",sep=";", encoding = "UTF-8")
tests_raw <- tests_raw %>%
mutate("id" = paste(Time,Area, sep = " "))
cases_raw <- cases_raw %>%
mutate("id" = paste(Time,Area, sep = " "))
data <- inner_join(tests_raw, cases_raw, by="id") %>%
select(-ends_with("y"),"val.y", -"id", -"Measure.x") %>%
rename(Tests = val.x) %>%
rename(Cases = val.y) %>%
filter(!is.na(Cases) || !is.na(Tests))
View(data)
rm(list = ls())
setwd("~/GitHub/COVID-19-analysis")
library(tidyverse)
library(jsonlite)
#Read in the material
tests_raw <- read.csv("https://sampo.thl.fi/pivot/prod/en/epirapo/covid19case/fact_epirapo_covid19case.csv?row=dateweek2020010120201231-443686&row=hcdmunicipality2020-445222&column=measure-445356",sep=";", encoding = "UTF-8")
cases_raw <- read.csv("https://sampo.thl.fi/pivot/prod/en/epirapo/covid19case/fact_epirapo_covid19case.csv?row=dateweek2020010120201231-443686&row=hcdmunicipality2020-445222&column=measure-444833",sep=";", encoding = "UTF-8")
tests_raw <- tests_raw %>%
mutate("id" = paste(Time,Area, sep = " "))
data <- inner_join(tests_raw, cases_raw, by="id") %>%
select(-ends_with("y"),"val.y", -"id", -"Measure.x") %>%
rename(Tests = val.x) %>%
rename(Cases = val.y)
tests_raw <- tests_raw %>%
mutate("id" = paste(Time,Area, sep = " "))
cases_raw <- cases_raw %>%
mutate("id" = paste(Time,Area, sep = " "))
data <- inner_join(tests_raw, cases_raw, by="id") %>%
select(-ends_with("y"),"val.y", -"id", -"Measure.x") %>%
rename(Tests = val.x) %>%
rename(Cases = val.y)
data <- inner_join(tests_raw, cases_raw, by="id") %>%
select(-ends_with("y"),"val.y", -"id", -"Measure.x") %>%
rename(Tests = val.x) %>%
rename(Cases = val.y) %>%
filter(!is.na(Cases))
rm(list = ls())
setwd("~/GitHub/COVID-19-analysis")
#Read in the material
tests_raw <- read.csv("https://sampo.thl.fi/pivot/prod/en/epirapo/covid19case/fact_epirapo_covid19case.csv?row=dateweek2020010120201231-443686&row=hcdmunicipality2020-445222&column=measure-445356",sep=";", encoding = "UTF-8")
cases_raw <- read.csv("https://sampo.thl.fi/pivot/prod/en/epirapo/covid19case/fact_epirapo_covid19case.csv?row=dateweek2020010120201231-443686&row=hcdmunicipality2020-445222&column=measure-444833",sep=";", encoding = "UTF-8")
tests_raw <- tests_raw %>%
mutate("id" = paste(Time,Area, sep = " "))
cases_raw <- cases_raw %>%
mutate("id" = paste(Time,Area, sep = " "))
data <- inner_join(tests_raw, cases_raw, by="id") %>%
select(-ends_with("y"),"val.y", -"id", -"Measure.x") %>%
rename(Tests = val.x) %>%
rename(Cases = val.y) %>%
filter(!is.na(Cases) & !is.na(Tests))
rm(list = ls())
#Read in the material
tests_raw <- read.csv("https://sampo.thl.fi/pivot/prod/en/epirapo/covid19case/fact_epirapo_covid19case.csv?row=dateweek2020010120201231-443686&row=hcdmunicipality2020-445222&column=measure-445356",sep=";", encoding = "UTF-8")
cases_raw <- read.csv("https://sampo.thl.fi/pivot/prod/en/epirapo/covid19case/fact_epirapo_covid19case.csv?row=dateweek2020010120201231-443686&row=hcdmunicipality2020-445222&column=measure-444833",sep=";", encoding = "UTF-8")
tests_raw <- tests_raw %>%
mutate("id" = paste(Time,Area, sep = " "))
cases_raw <- cases_raw %>%
mutate("id" = paste(Time,Area, sep = " "))
data <- inner_join(tests_raw, cases_raw, by="id") %>%
select(-ends_with("y"),"val.y", -"id", -"Measure.x") %>%
rename(Tests = val.x) %>%
rename(Cases = val.y) %>%
filter(!is.na(Cases) | !is.na(Tests))
rm(list = ls())
tests_raw <- read.csv("https://sampo.thl.fi/pivot/prod/en/epirapo/covid19case/fact_epirapo_covid19case.csv?row=dateweek2020010120201231-443686&row=hcdmunicipality2020-445222&column=measure-445356",sep=";", encoding = "UTF-8")
cases_raw <- read.csv("https://sampo.thl.fi/pivot/prod/en/epirapo/covid19case/fact_epirapo_covid19case.csv?row=dateweek2020010120201231-443686&row=hcdmunicipality2020-445222&column=measure-444833",sep=";", encoding = "UTF-8")
tests_raw <- tests_raw %>%
mutate("id" = paste(Time,Area, sep = " "))
cases_raw <- cases_raw %>%
mutate("id" = paste(Time,Area, sep = " "))
data <- inner_join(tests_raw, cases_raw, by="id") %>%
select(-ends_with("y"),"val.y", -"id", -"Measure.x") %>%
rename(Tests = val.x) %>%
rename(Cases = val.y) %>%
rename(Time = Time.x) %>%
rename(Area = Area.x) %>%
filter(!is.na(Cases) | !is.na(Tests))
data_test <- data %>%
filter(!is.na(Cases))
View(data_test)
data_test <- data %>%
filter(!is.na(Tests))
library("ggplot2")
library(ggplot2)
tests_vs_cases <- ggplot(data=data, aes(x=Time, y=Cases), group=Area) +
geom_line(linetype = "dashed")
tests_vs_cases
tests_vs_cases <- ggplot(data=data, aes(x=Time, y=Cases)) +
geom_line(linetype = "dashed")
tests_vs_cases
tests_vs_cases <- ggplot(data=data, aes(x=Time, y=Cases), group=Area) +
geom_line(linetype = "dashed")
tests_vs_cases <- ggplot(data=data, aes(x=Time, y=Cases), group=Area) +
geom_line()
tests_vs_cases
tests_vs_cases <- ggplot(data=data, aes(x=Time, y=Cases, group=Area) ) +
geom_line(linetype = "dashed")
tests_vs_cases
rm(list = ls())
tests_raw <- read.csv("https://sampo.thl.fi/pivot/prod/en/epirapo/covid19case/fact_epirapo_covid19case.csv?row=dateweek2020010120201231-443686&row=hcdmunicipality2020-445222&column=measure-445356",sep=";", encoding = "UTF-8")
cases_raw <- read.csv("https://sampo.thl.fi/pivot/prod/en/epirapo/covid19case/fact_epirapo_covid19case.csv?row=dateweek2020010120201231-443686&row=hcdmunicipality2020-445222&column=measure-444833",sep=";", encoding = "UTF-8")
tests_raw <- tests_raw %>%
mutate("id" = paste(Time,Area, sep = " "))
cases_raw <- cases_raw %>%
mutate("id" = paste(Time,Area, sep = " "))
data <- inner_join(tests_raw, cases_raw, by="id") %>%
select(-ends_with("y"),"val.y", -"id", -"Measure.x") %>%
rename(Tests = val.x) %>%
rename(Cases = val.y) %>%
rename(Time = Time.x) %>%
rename(Area = Area.x) %>%
filter(!is.na(Cases) | !is.na(Tests)) %>%
filter(Time != Time)
rm(list = ls())
tests_raw <- read.csv("https://sampo.thl.fi/pivot/prod/en/epirapo/covid19case/fact_epirapo_covid19case.csv?row=dateweek2020010120201231-443686&row=hcdmunicipality2020-445222&column=measure-445356",sep=";", encoding = "UTF-8")
cases_raw <- read.csv("https://sampo.thl.fi/pivot/prod/en/epirapo/covid19case/fact_epirapo_covid19case.csv?row=dateweek2020010120201231-443686&row=hcdmunicipality2020-445222&column=measure-444833",sep=";", encoding = "UTF-8")
tests_raw <- tests_raw %>%
mutate("id" = paste(Time,Area, sep = " "))
cases_raw <- cases_raw %>%
mutate("id" = paste(Time,Area, sep = " "))
data <- inner_join(tests_raw, cases_raw, by="id") %>%
select(-ends_with("y"),"val.y", -"id", -"Measure.x") %>%
rename(Tests = val.x) %>%
rename(Cases = val.y) %>%
rename(Time = Time.x) %>%
rename(Area = Area.x) %>%
filter(!is.na(Cases) | !is.na(Tests)) %>%
filter(Time != "Time")
tests_vs_cases <- ggplot(data=data, aes(x=Time, y=Cases, group=Area) ) +
geom_line(linetype = "dashed")
tests_vs_cases
data_all <- data %>%
filter(Area == "All areas")
View(data_all)
data_all <- data %>%
filter(Area == "All areas") %>%
select(-area)
data_all <- data %>%
filter(Area == "All areas") %>%
select(-Area)
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, y=Cases) ) +
geom_line(linetype = "dashed")
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, y=Cases) ) +
geom_line(linetype = "dashed")
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, y=Cases) ) +
geom_line(linetype = "dashed")
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, y=Cases, group = 1) ) +
geom_line(linetype = "dashed")
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, y=Cases, group = 1) ) +
geom_line()
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, y=Cases, group = 1) ) +
geom_line()
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, y=Cases, group = 1) ) +
geom_line() +
geom_line(aes(y = Tests))
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, y=Cases, group = 1) ) +
geom_line() +
geom_line(aes(y = Tests, col="red"))
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, y=Cases, group = 1) ) +
geom_line() +
geom_line(aes(y = Tests, col="Red"))
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, y=Cases, group = 1, ) ) +
geom_line() +
geom_line(aes(y = Tests), col="Red")
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(y=Cases) +
geom_line(aes(y = Tests), col="Red")
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) +
geom_line(aes(y = Tests), col="Red")
tests_vs_cases
geom_text(aes(label=Cases)) +
tests_vs_cases
geom_text() +
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) +
geom_line(aes(y = Tests), col="Red")+
geom_text()
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) +
geom_line(aes(y = Tests), col="Red") +
geom_text(aes(label=Cases))
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) +
geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y = Tests), col="Red")
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) +
geom_text(aes(label=Cases)) +
geom_line(aes(y = Tests), col="Red")
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y = Tests), col="Red") + geom_text(aes(label=Cases, y=Tests))
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y = Tests), col="Red") + geom_text(aes(label=Tests, y=Tests))
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y = Tests), col="Red") + geom_text(aes(label=Tests, y=Tests)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*33, name="Testss")) +
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y = Tests), col="Red") + geom_text(aes(label=Tests, y=Tests)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*33, name="Tests"))
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y = Tests), col="Red") + geom_text(aes(label=Tests, y=Tests)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests"))
tests_vs_cases
tests_vs_cases
coeff = 1/0.03
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y = Tests), col="Red") + geom_text(aes(label=Tests, y=Tests)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests"))
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases/coeff)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests), col="Red") + geom_text(aes(label=Tests, y=Tests)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests"))
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff), col="Red") + geom_text(aes(label=Tests, y=Tests)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests"))
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests"))
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon( aes(ymin=Tests/coeff,ymax=Cases), fill="blue", alpha="0.5")
tests_vs_cases
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon( aes(ymin=Tests/coeff,ymax=Cases), fill="blue")#, alpha="0.5")
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(aes(ymin=(Tests/coeff),ymax=Cases), fill="blue")#, alpha="0.5")
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(aes(ymin=(Tests/coeff),ymax=Cases), fill="red")#, alpha="0.5")
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(aes(ymin=(Tests/coeff),ymax=Cases), fill="red") alpha="1/2")
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(aes(ymin=(Tests/coeff),ymax=Cases), fill="red"), alpha="1/2")
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(aes(ymin=(Tests/coeff),ymax=Cases), fill="red", alpha="1/2")
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(aes(ymin=(Tests/coeff),ymax=Cases), fill="red50")
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(aes(ymin=(Tests/coeff),ymax=Cases), fill="grey70")
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(aes(ymin=(Tests/coeff),ymax=Cases, fill="red"), alpha="1/2")
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(aes(ymin=(Tests/coeff),ymax=Cases, fill="red"), alpha=0.5)
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(aes(ymin=(Tests/coeff),ymax=Cases), fill="red", alpha=0.5)
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(aes(ymin=(Tests/coeff),ymax=Cases), fill="red", alpha=0.25)
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(aes(ymin=(Tests/coeff*2),ymax=Cases), fill="red", alpha=0.25)
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(aes(ymin=(Tests/coeff),ymax=Cases), fill="red", alpha=0.25)
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff*2), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(aes(ymin=(Tests/coeff*2),ymax=Cases), fill="red", alpha=0.25)
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff*2), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(data=subset(data_all, Cases >= Tests/coeff), aes(ymin=(Tests/coeff*2),ymax=Cases), fill="red", alpha=0.25)
#geom_ribbon(aes(ymin=(Tests/coeff*2),ymax=Cases), fill="red", alpha=0.25) +
tests_vs_cases
subset(data_all, Cases >= Tests/coeff)
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff*2), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(data=subset(data_all, Cases >= Tests/coeff*2), aes(ymin=(Tests/coeff*2),ymax=Cases), fill="red", alpha=0.25)
#geom_ribbon(aes(ymin=(Tests/coeff*2),ymax=Cases), fill="red", alpha=0.25) +
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff*2), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(data=subset(data_all, Cases >= Tests/coeff*2), aes(ymin=(Tests/coeff*2),ymax=Cases), fill="red", alpha=0.25) +
geom_ribbon(data=subset(data_all, Cases <= Tests/coeff*2), aes(ymax=(Tests/coeff*2),ymin=Cases), fill="green", alpha=0.25) +
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff*2), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(data=subset(data_all, Cases >= Tests/coeff*2), aes(ymin=(Tests/coeff*2),ymax=Cases), fill="red", alpha=0.25) +
geom_ribbon(data=subset(data_all, Cases <= Tests/coeff*2), aes(ymax=(Tests/coeff*2),ymin=Cases), fill="green", alpha=0.25)
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff*2), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(data=subset(data_all, Cases >= Tests/coeff*2), aes(ymin=(Tests/coeff*2),ymax=Cases), fill="red", alpha=0.25) +
geom_ribbon(data=subset(data_all, Cases < Tests/coeff*2), aes(ymax=(Tests/coeff*2),ymin=Cases), fill="green", alpha=0.25)
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(data=subset(data_all, Cases >= Tests/coeff), aes(ymin=(Tests/coeff),ymax=Cases), fill="red", alpha=0.25) +
geom_ribbon(data=subset(data_all, Cases < Tests/coeff), aes(ymax=(Tests/coeff),ymin=Cases), fill="green", alpha=0.25)
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff*2), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff*2)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(data=subset(data_all, Cases >= Tests/coeff*2), aes(ymin=(Tests/coeff*2),ymax=Cases), fill="red", alpha=0.25) +
geom_ribbon(data=subset(data_all, Cases < Tests/coeff*""), aes(ymax=(Tests/coeff*2),ymin=Cases), fill="green", alpha=0.25)
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff*2), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff*2)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(data=subset(data_all, Cases >= Tests/coeff*2), aes(ymin=(Tests/coeff*2),ymax=Cases), fill="red", alpha=0.25) +
geom_ribbon(data=subset(data_all, Cases < Tests/coeff*2), aes(ymax=(Tests/coeff*2),ymin=Cases), fill="green", alpha=0.25)
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff*), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(data=subset(data_all, Cases >= Tests/coeff), aes(ymin=(Tests/coeff),ymax=Cases), fill="red", alpha=0.25) +
geom_ribbon(data=subset(data_all, Cases < Tests/coeff), aes(ymax=(Tests/coeff),ymin=Cases), fill="green", alpha=0.25)
tests_vs_cases
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(data=subset(data_all, Cases >= Tests/coeff), aes(ymin=(Tests/coeff),ymax=Cases), fill="red", alpha=0.25) +
geom_ribbon(data=subset(data_all, Cases < Tests/coeff), aes(ymax=(Tests/coeff),ymin=Cases), fill="green", alpha=0.25)
tests_vs_cases
gg1 <- ggplot_build(tests_vs_cases)
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests"))# +
#geom_ribbon(data=subset(data_all, Cases >= Tests/coeff), aes(ymin=(Tests/coeff),ymax=Cases), fill="red", alpha=0.25) +
#geom_ribbon(data=subset(data_all, Cases < Tests/coeff), aes(ymax=(Tests/coeff),ymin=Cases), fill="green", alpha=0.25)
tests_vs_cases
gg1 <- ggplot_build(tests_vs_cases)
# extract data for the loess lines from the 'data' slot
df2 <- data.frame(x = gg1$data[[1]]$x,
ymin = gg1$data[[1]]$y,
ymax = gg1$data[[2]]$y)
# use the loess data to add the 'ribbon' to plot
tests_vs_cases +
geom_ribbon(data = df2, aes(x = x, ymin = ymin, ymax = ymax),
fill = "grey", alpha = 0.4)
tests_vs_cases
df2
gg1
df2
gg1
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(data=subset(data_all, Cases >= Tests/coeff), aes(ymin=(Tests/coeff),ymax=Cases), fill="red", alpha=0.25) +
geom_ribbon(data=subset(data_all, Cases < Tests/coeff), aes(ymax=(Tests/coeff),ymin=Cases), fill="green", alpha=0.25)
tests_vs_cases
ggplotly(tests_vs_cases)
library("plotly")
ggplotly
ggplotly(tests_vs_cases)
tests_vs_cases
coeff = 1/0.01
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(data=subset(data_all, Cases >= Tests/coeff), aes(ymin=(Tests/coeff),ymax=Cases), fill="red", alpha=0.25) +
geom_ribbon(data=subset(data_all, Cases < Tests/coeff), aes(ymax=(Tests/coeff),ymin=Cases), fill="green", alpha=0.25)
tests_vs_cases
coeff = 1/0.02
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(data=subset(data_all, Cases >= Tests/coeff), aes(ymin=(Tests/coeff),ymax=Cases), fill="red", alpha=0.25) +
geom_ribbon(data=subset(data_all, Cases < Tests/coeff), aes(ymax=(Tests/coeff),ymin=Cases), fill="green", alpha=0.25)
tests_vs_cases
coeff = 1/0.03
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(data=subset(data_all, Cases >= Tests/coeff), aes(ymin=(Tests/coeff),ymax=Cases), fill="red", alpha=0.25) +
geom_ribbon(data=subset(data_all, Cases < Tests/coeff), aes(ymax=(Tests/coeff),ymin=Cases), fill="green", alpha=0.25)
tests_vs_cases
coeff = 1/0.04
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(data=subset(data_all, Cases >= Tests/coeff), aes(ymin=(Tests/coeff),ymax=Cases), fill="red", alpha=0.25) +
geom_ribbon(data=subset(data_all, Cases < Tests/coeff), aes(ymax=(Tests/coeff),ymin=Cases), fill="green", alpha=0.25)
tests_vs_cases
3
coeff = 1/0.03
tests_vs_cases <- ggplot(data=data_all, aes(x=Time, group = 1, ) ) +
geom_line(aes(y=Cases)) + geom_text(aes(label=Cases, y=Cases)) +
geom_line(aes(y=Tests/coeff), col="Red") + geom_text(aes(label=Tests, y=Tests/coeff)) +
scale_y_continuous(name = "Cases",sec.axis = sec_axis( trans=~.*coeff, name="Tests")) +
geom_ribbon(data=subset(data_all, Cases >= Tests/coeff), aes(ymin=(Tests/coeff),ymax=Cases), fill="red", alpha=0.25) +
geom_ribbon(data=subset(data_all, Cases < Tests/coeff), aes(ymax=(Tests/coeff),ymin=Cases), fill="green", alpha=0.25)
tests_vs_cases
